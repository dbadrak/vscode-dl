<html>
<head>
<meta charset="UTF-8"> <meta name="description" content="Visual Studio Code mirror">
<title>Visual Studio Code mirror</title>
<link rel="stylesheet" type="text/css" href="GitHub2.css">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css">
</head>
<body>

<a href="https://github.com/rene-d/dl-vscode"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>

<center>
    <img src="https://code.visualstudio.com/assets/images/home-intellisense.svg" height="48px">
    <img src="https://code.visualstudio.com/assets/images/home-git.svg" height="48px">
    <img src="https://code.visualstudio.com/assets/images/home-debug.svg" height="48px">
</center>

<div id="content">
# Welcome

Welcome to the private [Visual Studio Code](http://code.visualstudio.com) mirror. This mirror allows you to install VSCode offline and a curated list of extensions.

## Installing Visual Studio Code @@CODE_VER@@

1. Download the [Debian package](@@CODE_URL@@) _or_ chdir to the mirror folder and type into a terminal :

    ````bash
    $ sudo dpkg -i @@CODE_DEB@@
    ````

    VSCode automatically adds a source.list for APT. You should remove the file `/etc/apt/sources.list.d/vscode.list`.

2. Deactivate updates and telemetry in VSCode [Settings](https://code.visualstudio.com/docs/getstarted/settings) (`Ctrl ,` or `âŒ˜ ,` to edit them):

    ````json
    {
        "update.channel": "none",
        "telemetry.enableTelemetry": false,
        "telemetry.enableCrashReporter": false,
        "extensions.autoUpdate": false
    }
    ````

<center><img src="https://code.visualstudio.com/assets/images/Hundreds-of-Extensions.png" height="160px"></center>

## Extensions

### Installing an extension
- download the `.vsix` file by clicking on the link into the **Version** column _or_ go to the mirror `vsix/` subdirectory
- in a terminal, type : `code --install-extension <file>.vsix`

**CAUTION** The C/C++ extension requires the native companion extension `cpptools-linux` to be installed _after_.

### Updating all installed extensions automatically

[update-extensions.py](update-extensions.py) is a Python3 script that downloads from the mirror and updates the installed extensions ([Requests](http://python-requests.org/) package required).

````bash
# One-liner (because you're worth it!):
curl -s @@path_name@@update-extensions.py | python3 - @@path_name@@

# Alternatively, you can run the script into the mirror folder:
cd /path/to/vscode-mirror
python3 update-extensions.py
````

### List of selected extensions
</div>

<div id="md">
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/8.4.1/markdown-it.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<script type="text/javascript">
function httpGet(theUrl)
{
    var xmlHttp = null;
    xmlHttp = new XMLHttpRequest();
    xmlHttp.open("GET", theUrl, false);
    xmlHttp.send(null);
    return xmlHttp.responseText;
}
</script>

<script>
    var md = window.markdownit({
        html: true,
        highlight: function (str, lang) {
            if (lang && hljs.getLanguage(lang)) {
                try {
                    return '<pre class="hljs"><code>' +
                           hljs.highlight(lang, str, true).value +
                           '</code></pre>';
                } catch (__) {}
            }

            return ''; // use external default escaping
        }
    });

    var txt = document.getElementById('content').innerHTML;
    version = JSON.parse(httpGet('code.json'));
    txt = txt.replace(/@@CODE_DEB@@/g, version.code.deb)
    txt = txt.replace(/@@CODE_URL@@/g, version.code.url)
    txt = txt.replace(/@@CODE_VER@@/g, version.code.version)

    var path = document.URL;
    var path_name = path.substring(0, path.lastIndexOf('/') + 1);

    txt = txt.replace(/@@path_name@@/g, path_name)

    document.getElementById('content').innerHTML = md.render(txt);

    txt = httpGet('extensions.md');
    document.getElementById('md').innerHTML = md.render(txt);
</script>

</body>
</html>
